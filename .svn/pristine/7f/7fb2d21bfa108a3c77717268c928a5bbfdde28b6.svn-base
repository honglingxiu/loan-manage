function fnOnTryingToRegister(){console.log("尝试上线")}function OnTryingToRegister(){console.log("尝试上线")}function fnOnSuccessToRegister(){console.log("上线成功")}function OnSuccessToRegister(){console.log("上线成功")}function fnOnFailToRegister(){console.log("上线失败")}function OnFailToRegister(){console.log("上线失败")}function fnOnFailToRegisterEx(e,n){console.log("上线失败")}function OnFailToRegisterEx(e,n){console.log("上线失败")}function fnOnTryingToReRegister(){console.log("重新注册")}function OnTryingToReRegister(){console.log("重新注册")}function fnOnSuccessToReRegister(){console.log("重新注册成功")}function OnSuccessToReRegister(){console.log("重新注册成功")}function fnOnFailToReRegister(){console.log("重新注册失败")}function OnFailToReRegister(){console.log("重新注册失败")}function fnOnFailToReRegisterEx(e,n){console.log("OnFailToReRegisterEx")}function OnFailToReRegisterEx(e,n){console.log("OnFailToReRegisterEx")}function fnOnTryingToUnRegister(){console.log("注销")}function OnTryingToUnRegister(){console.log("注销")}function fnOnSuccessToUnRegister(){console.log("下线成功")}function OnSuccessToUnRegister(){registerId="",console.log("下线成功")}function fnOnFailToUnRegister(){console.log("下线失败")}function OnFailToUnRegister(){console.log("下线失败")}function fnOnIncomingDiagnostic(e,n,o){console.log("外部进入连接")}function OnIncomingDiagnostic(e,n,o){console.log("外部进入连接")}function fnOnOutgoingDiagnostic(e,n,o){console.log("对外连接")}function OnOutgoingDiagnostic(e,n,o){console.log("对外连接")}function fnOnFailToConnect(e){console.log("呼叫失败")}function OnFailToConnect(e){console.log("呼叫失败")}function fnOnConnecting(e){console.log("呼叫")}function OnConnecting(e){console.log("呼叫")}function fnOnSuccessToConnect(e,n,o){console.log("呼叫成功"),e==consultLineNo?consulting=1:e==meetmeLineNo?meetmeing=1:"in"==callType&&DigitDTMF(e,"#")}function OnSuccessToConnect(e,n,o){console.log("呼叫成功"),e==consultLineNo?consulting=1:e==meetmeLineNo?meetmeing=1:"in"==callType&&DigitDTMF(e,"#")}function fnOnDisconnectCall(e){if(console.log("呼叫成功后对方挂断"),hangupflag)1==consulting&&e==consultLineNo&&(consulting=0,consultLineNo=-1);else if(1==consulting){if(e==consultLineNo)doDisConsult();else if(e==busiLineNo){for(e=0;e<m_nTotalLine;e++)Phone.IsLineBusy(e)&&(Disconnect(e)||ErrorMessage());consultLineNo=-1,consulting=0}}else if(1==meetmeing)if(e==meetmeLineNo)doDisMeetMe();else if(e==busiLineNo){for(e=0;e<m_nTotalLine;e++)Phone.IsLineBusy(e)&&(Disconnect(e)||ErrorMessage());meetmeing=0,meetmeLineNo=-1}}function OnDisconnectCall(e){if(console.log("呼叫成功后对方挂断"),hangupflag)1==consulting&&e==consultLineNo&&(consulting=0,consultLineNo=-1);else if(1==consulting){if(e==consultLineNo)doDisConsult();else if(e==busiLineNo){for(e=0;e<m_nTotalLine;e++)Phone.IsLineBusy(e)&&(Disconnect(e)||ErrorMessage());consultLineNo=-1,consulting=0}}else if(1==meetmeing)if(e==meetmeLineNo)doDisMeetMe();else if(e==busiLineNo){for(e=0;e<m_nTotalLine;e++)Phone.IsLineBusy(e)&&(Disconnect(e)||ErrorMessage());meetmeing=0,meetmeLineNo=-1}}function fnOnProvisionalResponse(e,n,o){console.log("临时响应")}function OnProvisionalResponse(e,n,o){console.log("临时响应")}function fnOnServerFailureResponse(e,n,o){console.log("响应失败")}function OnServerFailureResponse(e,n,o){console.log("响应失败")}function fnOnGeneralFailureResponse(e,n,o){console.log("响应全部失败")}function OnGeneralFailureResponse(e,n,o){console.log("响应全部失败")}function fnOnRequestFailureResponse(e,n,o){console.log("请求失败")}function OnRequestFailureResponse(e,n,o){console.log("请求失败")}function fnOnMsgNOTIFY(e){console.log("服务器响应")}function OnMsgNOTIFY(e){console.log("服务器响应")}var connectLineNo="",busiLineNo=0,consultLineNo=-1,consulting=0,meetmeLineNo=-1,meetmeing=0,hangupflag=!1,callType="",m_nTotalLine=7,registerId="";(function(){var e,n={},o=!1;n.IsMozillaPluginInstall=function(){var e=!1;if(navigator.plugins)for(nCount=0;nCount<navigator.plugins.length;nCount++)if(navigator.plugins[nCount].name.indexOf("VaxSIPUserAgent 7.0.6.4")>=0){e=!0;break}return e},n.IsWindowActiveXInstall=function(){var e=!1;return void 0!==window.ActiveXObject&&document.VaxEmbedCAB&&(e=!0),e},n.DetectWebBrowser=function(){o=!1;var i=navigator.userAgent.toUpperCase();i.indexOf("MSIE")>=0||i.indexOf("TRIDENT")>=0?n.IsWindowActiveXInstall()?(o=!0,e=VaxEmbedCAB):alert("请安装IE软电话插件"):i.indexOf("FIREFOX")>=0?n.IsMozillaPluginInstall()?e=document.getElementById("VaxEmbedPlugIn"):alert("请安装FIREFOX软电话插件"):i.indexOf("CHROME")>=0?n.IsMozillaPluginInstall()?e=document.getElementById("VaxEmbedPlugIn"):alert("请安装CHROME软电话插件"):i.indexOf("SAFARI")>=0&&(n.IsMozillaPluginInstall()?e=document.getElementById("VaxEmbedPlugIn"):alert("请安装SAFARI软电话插件"))},n.FindLine=function(){for(LineNo=0;LineNo<m_nTotalLine;LineNo++)if(!n.IsLineBusy(LineNo))return LineNo;return-1},n.OpenLinesVaxVoIP=function(e){for(ListenPortRTP=7e3,ErrorCount=0,LineNo=0;LineNo<m_nTotalLine;LineNo++){if(!n.OpenLine(LineNo,0,e,ListenPortRTP)){if(11!=n.GetVaxObjectError()){ErrorMessage(),Result=!1;break}ErrorCount++,LineNo--}if(ListenPortRTP+=2,ErrorCount>=m_nTotalLine+500)return alert("Unable to open RTP communication port."),!1}return!0},n.ErrorMessage=function(){switch(VaxError=n.GetVaxObjectError(),VaxError){case 10:alert("You are not online, please click the 'Online' button first to dial/receive the calls.");break;case 11:alert("Cann't open local communication port. Another softphone (x-Ten, x-lite, skype etc) is already running. Please close it first.");break;case 12:alert("License Key is not valid.");break;case 13:alert("Fail to initialize VaxVoIP task window.");break;case 14:alert("Cann't access Input/Mic device or device is already in use.");break;case 15:alert("Cann't access Output/Speaker device or device is already in use.");break;case 16:alert("Input/Mic device is not open.");break;case 17:alert("Output/Speaker device is not open.");break;case 18:alert("Your sound device does not support mic volume.");break;case 19:alert("Your sound device does not support speaker volume.");break;case 20:alert("Recording media initialization fail.");break;case 21:alert("Cann't open the wave file.");break;case 22:alert("Provided SIP URI is not valid.");break;case 23:alert("Codec is not supported.");break;case 24:alert("Error to create SDP (Session Description Protocol) request.");break;case 25:alert("Error to create CONNECTION request. Please check the provided SIP URI is valid.");break;case 26:alert("Error to create REGISTER request. Please check the provided SIP URI is valid.");break;case 27:alert("Error to create UN-REGISTER request. Please check the provided SIP URI is valid.");break;case 28:alert("Error to create DISCONNECT request.");break;case 29:alert("Line No is not valid.");break;case 30:alert("Line is already busy.");break;case 31:alert("Line is not open.");break;case 32:alert("Invalid Call-Id.");break;case 33:alert("Provided value is not valid.");break;case 34:alert("Selected line is not in voice session.");break;case 35:alert("Fail to read wave file.");break;case 36:alert("Fail to write wave file.");break;case 37:alert("Unsupported wave file format.");break;case 38:alert("Error to create CANCEL request.");break;case 39:alert("License limit exceeded.");break;case 40:alert("Unable to find contact or contact is not added.");break;case 41:alert("Remote user is not online or remote user is failed to subscribe to the SIP SERVER");break;case 42:alert("Error to create chat status message.");break;case 43:alert("Error to create add contact message.")}},n.GetCallId=function(n){return o?e.GetCallId(n):e.GetCallId(String(Number(n)))},n.GetMicSoundLevel=function(){return e.GetMicSoundLevel()},n.GetSpkSoundLevel=function(){return e.GetSpkSoundLevel()},n.GetAudioInDevTotal=function(){return e.GetAudioInDevTotal()},n.GetAudioOutDevTotal=function(){return e.GetAudioOutDevTotal()},n.GetAudioOutDevName=function(n){return o?e.GetAudioOutDevName(n):e.GetAudioOutDevName(String(Number(n)))},n.GetAudioInDevName=function(n){return o?e.GetAudioInDevName(n):e.GetAudioInDevName(String(Number(n)))},n.SetDomainKey=function(n){return e.SetDomainKey(n)},n.InitializeEx=function(n,i,t,r,l,c,s,a,u,D,g,f){return o?e.InitializeEx(n,i,t,r,l,c,s,a,u,D,g,f):e.InitializeEx(String(Number(n)),i,String(Number(t)),r,l,c,s,a,u,D,String(Number(g)),String(Number(f)))},n.Initialize=function(n,i,t,r,l,c,s,a,u,D){return o?e.Initialize(n,i,t,r,l,c,s,a,u,D):e.Initialize(String(Number(n)),i,String(Number(t)),r,l,c,s,a,String(Number(u)),String(Number(D)))},n.UnInitialize=function(){e.UnInitialize()},n.RegisterToProxy=function(n){return o?e.RegisterToProxy(n):e.RegisterToProxy(String(Number(n)))},n.UnRegisterToProxy=function(){return e.UnRegisterToProxy()},n.OpenLine=function(n,i,t,r){return o?e.OpenLine(n,i,t,r):e.OpenLine(String(Number(n)),String(Number(i)),t,String(Number(r)))},n.CloseLine=function(n){return o?e.CloseLine(n):e.CloseLine(String(Number(n)))},n.GetVaxObjectError=function(){return e.GetVaxObjectError()},n.DialCall=function(n,i,t,r){return o?e.DialCall(n,i,t,r):e.DialCall(String(Number(n)),i,String(Number(t)),String(Number(r)))},n.Connect=function(n,i,t,r){return o?e.Connect(n,sDialNo,t,r):e.Connect(String(Number(n)),sDialNo,String(Number(t)),String(Number(r)))},n.Disconnect=function(n){return o?e.Disconnect(n):e.Disconnect(String(Number(n)))},n.AcceptCall=function(n,i,t,r){return o?e.AcceptCall(n,i,t,r):e.AcceptCall(String(Number(n)),i,String(Number(t)),String(Number(r)))},n.RejectCall=function(n){return e.RejectCall(n)},n.TransferCallEx=function(n,i){return o?e.TransferCallEx(n,i):e.TransferCallEx(String(Number(n)),i)},n.TransferCall=function(n,i){return o?e.TransferCall(n,i):e.TransferCall(String(Number(n)),i)},n.JoinTwoLine=function(n,i){return o?e.JoinTwoLine(n,i):e.JoinTwoLine(String(Number(n)),String(Number(i)))},n.HoldLine=function(n){return o?e.HoldLine(n):e.HoldLine(String(Number(n)))},n.UnHoldLine=function(n){return o?e.UnHoldLine(n):e.UnHoldLine(String(Number(n)))},n.IsLineOpen=function(n){return o?e.IsLineOpen(n):e.IsLineOpen(String(Number(n)))},n.IsLineHold=function(n){return o?e.IsLineHold(n):e.IsLineHold(String(Number(n)))},n.IsLineBusy=function(n){return o?e.IsLineBusy(n):e.IsLineBusy(String(Number(n)))},n.EnableKeepAlive=function(n){return o?e.EnableKeepAlive(n):e.EnableKeepAlive(String(Number(n)))},n.DisableKeepAlive=function(){e.DisableKeepAlive()},n.DeselectAllVoiceCodec=function(){e.DeselectAllVoiceCodec()},n.SelectAllVoiceCodec=function(){e.SelectAllVoiceCodec()},n.SelectVoiceCodec=function(n){return o?e.SelectVoiceCodec(n):e.SelectVoiceCodec(String(Number(n)))},n.DeselectVoiceCodec=function(n){return o?e.DeselectVoiceCodec(n):e.DeselectVoiceCodec(String(Number(n)))},n.GetMyIP=function(){return e.GetMyIP()},n.DigitDTMF=function(n,i){return o?e.DigitDTMF(n,i):e.DigitDTMF(String(Number(n)),i)},n.SetDTMFVolume=function(n){return o?e.SetDTMFVolume(n):e.SetDTMFVolume(String(Number(n)))},n.GetDTMFVolume=function(){return e.GetDTMFVolume()},n.EnableForceInbandDTMF=function(n){return o?e.EnableForceInbandDTMF(n):e.EnableForceInbandDTMF(String(Number(n)))},n.DisableForceInbandDTMF=function(n){return o?e.DisableForceInbandDTMF(n):e.DisableForceInbandDTMF(String(Number(n)))},n.EnableMicBoost=function(){return e.EnableMicBoost()},n.DisableMicBoost=function(){return e.DisableMicBoost()},n.IsMicBoostEnable=function(){return e.IsMicBoostEnable()},n.EnableAGC=function(n){return o?e.EnableAGC(n):e.EnableAGC(String(Number(n)))},n.DisableAGC=function(){return e.DisableAGC()},n.EnableEchoNoiseCancellation=function(){return e.EnableEchoNoiseCancellation()},n.DisableEchoNoiseCancellation=function(){return e.DisableEchoNoiseCancellation()},n.EnableDonotDisturb=function(){e.EnableDonotDisturb()},n.DisableDonotDisturb=function(){e.DisableDonotDisturb()},n.ConfAllowLine=function(n,i,t){return o?e.ConfAllowLine(n,i,t):e.ConfAllowLine(String(Number(n)),String(Number(i)),String(Number(t)))},n.ForwardCall=function(n,i){return o?e.ForwardCall(n,i):e.ForwardCall(String(Number(n)),i)},n.VoiceChanger=function(n){return o?e.VoiceChanger(n):e.VoiceChanger(String(Number(n)))},n.OffLine=function(){connectLineNo="",busiLineNo=0,consultLineNo=-1,consulting=0,meetmeLineNo=-1,meetmeing=0,hangupflag=!1,callType="",m_nTotalLine=7,registerId="",n.UnInitialize()},n.Online=function(e,o,i){for(n.DetectWebBrowser(),window.location.href.indexOf("localhost")>-1?n.SetDomainKey("186D94D194D122D89D218D66D230D155D143D144D148D174D62D156D117D213D41D132D149D22D213D171D3D183D181D115D13D209D10D207D243D26D117D228D122D41D41D181D54D124D118D10D127D247D90D74D40D144D219D129D201D70D233D165D27D83D176D80D211D54D0D108D141D245D47D231D99D135D181D121D150D137D130D113D173D25D33D63D238D230D40D158D216D92D73D225D68D135D239D109D81D137D211D253D223D188D130D157D189D186D217D126D245D207D74D96D224D232D122D30D144D195D68D214D112D84D199D241D105D163D25D115D147D98D114D222D125D"):n.SetDomainKey("65D110D200D186D128D11D161D115D155D143D144D148D174D62D156D117D213D41D132D149D22D213D171D3D183D181D115D13D209D10D207D243D26D117D228D122D41D41D181D54D124D118D10D127D247D90D74D40D144D219D129D201D70D233D165D27D83D176D80D211D54D0D108D141D245D47D231D99D135D181D121D150D137D130D113D173D25D33D63D238D230D40D158D216D92D73D225D68D135D239D109D81D137D211D253D223D188D130D157D189D186D217D126D245D207D74D96D224D232D122D30D144D217D65D79D12D196D20D125D182D16D160D241D30D196D190D162D85D99D141D6D49D241D107D229D230D"),MyIP=n.GetMyIP(),AccountUserName=o,AccountAuthLogin=o,AccountAuthPassword=i,AccountDisplayName=o,AccountDomain=e,AccountSIPProxy=e,ListenPortSIP=5061;ListenPortSIP<7e3&&(Result=n.InitializeEx(0,MyIP,ListenPortSIP,AccountUserName,AccountAuthLogin,AccountAuthPassword,AccountDisplayName,AccountDomain,AccountSIPProxy,"",1,m_nTotalLine),!Result);ListenPortSIP++)if(11!=n.GetVaxObjectError())return n.ErrorMessage(),!1;return ListenPortSIP>=7e3?(alert("Cann't open SIP communication port."),!1):!!n.OpenLinesVaxVoIP(MyIP)&&(n.RegisterToProxy(1800)?(n.DeselectAllVoiceCodec(),n.SelectVoiceCodec(3),n.SelectVoiceCodec(2),n.SelectVoiceCodec(0),n.SelectVoiceCodec(1),n.EnableKeepAlive(10),!0):(n.ErrorMessage(),!1))},n.BtnDial_onclick=function(e){if(e)return busyLineNo=n.FindLine(),LineNo=busyLineNo,InputDeviceId=0,OutputDeviceId=0,n.DialCall(LineNo,e,InputDeviceId,OutputDeviceId)?(callType="out",hangupflag=!1,!0):(n.ErrorMessage(),!1)},n.BtnHangUp_onclick=function(e){if(hangupflag=!0,1==consulting){if(n.IsLineBusy(busiLineNo)&&n.IsLineBusy(consultLineNo)&&!n.JoinTwoLine(busiLineNo,consultLineNo))return n.ErrorMessage(),!1}else 1==meetmeing&&(meetmeing=0,meetmeLineNo=-1);if("undefined"!=typeof e){if(!n.Disconnect(e))return n.ErrorMessage(),!1}else for(LineNo=0;LineNo<m_nTotalLine;LineNo++)if(n.IsLineBusy(LineNo)&&!n.Disconnect(LineNo))return n.ErrorMessage(),!1;return!0},window.Phone=n})();